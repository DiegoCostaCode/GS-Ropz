<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Home</title>
  <link th:href="@{/css/global.css}" rel="stylesheet" />
  <link th:href="@{/css/home.css}" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="../static/css/home.css">
  <script th:src="@{/js/update_functions.js}" defer></script>
  <link rel="stylesheet" href="../static/css/cadastro.css">
</head>
<body>
  <main>
    <header>
      <img th:src="@{/img/ropz-logo-gray.png}" alt="logo" class="logo">
      <ul>
        <li><a href="#"  class="lowkey-btn" th:href="@{/logout}">logout</a></li>
      </ul>
    </header>
    <div>
      <section>
        <div class="div-localizacao">
          <h3>
            <span class="material-icons" style="font-size: 18px; vertical-align: middle;">location_on</span>
            <span th:text="${cidade}"></span>,<span th:text="${estado}"></span>
          </h3>
          <p> Lat. <span th:text="${lat}"></span> Long. <span th:text="${long}"></span></p>
        </div>

        <div class="div-alerta-prompt">
          <div>
            <h3>Maior temperatura nos próximos 5 dias...</h3>
              <div class="container-weather-line">
                <span th:text="${#temporals.format(temperaturaAlta.temperatura.dataHora, 'dd/MM/yyyy HH:mm')}"></span> -
                <span th:text="${#numbers.formatDecimal(temperaturaAlta.temperatura.temperaturaMaxima, 1, 0)} + '°C'"></span>
                <img class="open-weather-icon"
                     th:if="${temperaturaAlta.temperatura.icon} != null"
                     th:src="'https://openweathermap.org/img/wn/' + ${temperaturaAlta.temperatura.icon} + '@2x.png'"
                     alt="ícone do tempo" />
                <span th:text="${temperaturaAlta.classificacao.getDescricao()}"></span>
              </div>
          </div>

          <div>
            <h3>Precauções</h3>
            <p th:text="${temperaturaAlta.mensagem}"></p>
          </div>

        </div>

        <div class="div-info">
          <h3>Suas infos</h3>

          <form action="/usuario/update" method="get" th:object="${usuarioRequestDTO}">
            <label for="nome">Nome:</label>
            <input type="text" id="nome" th:field="*{nome}" required><br>

            <label for="email">E-mail:</label>
            <input type="email" id="email" th:field="*{email}" required><br>

            <label for="telefone">Telefone:</label>
            <input type="text" id="telefone" th:field="*{telefone}" required maxlength="15"><br>

            <label for="senha">Senha:</label>
            <input type="text" id="senha" th:field="*{senha}" required><br>

            <label for="cep">CEP:</label>
            <input type="text" id="cep" th:field="*{cep}" required maxlength="9"><br>


            <button class="btn-update-info" type="submit">Atualizar</button>
            <a class="lowkey-btn" th:href="@{/usuario/delete}">deletar minha conta</a>
          </form>

        </div>

      </section>
      <aside>

        <div class="div-aside-clima" th:object="${relatorioTempAtual}">
          <section class="temp-atual">
            <div class="div-weather-info">
              <img class="open-weather-icon"
                   th:if="${relatorioTempAtual.temperatura.icon} != null"
                   th:src="'https://openweathermap.org/img/wn/' + *{temperatura.icon} + '@2x.png'"
                   alt="ícone do tempo" />
            </div>

            <div class="div-celsius-value">
                <h1 th:text="*{#numbers.formatDecimal(temperatura.temperatura, 1 , 0)} + '°C'"></h1>
            </div>

          </section>
          <ul>

            <li>
              <p>Max</p>
              <span th:text="*{#numbers.formatDecimal(temperatura.temperaturaMaxima, 1, 0)} + '°C'"></span>
            </li>
            <li>
              <p>Min</p>
              <span th:text="*{#numbers.formatDecimal(temperatura.temperaturaMinima, 1, 0)} + '°C'"></span>
            </li>
            <li>
              <p>Sensação</p>
              <span th:text="*{#numbers.formatDecimal(temperatura.sensacaoTermica, 1, 0)} + '°C'"></span>
            </li>
            <li>
              <p>Umidade</p>
              <span th:text="*{temperatura.umidade} + ' m/s'"></span>
            </li>
          </ul>

          <section class="section-status-actual-weather">
            <div class="status-risco">
              <h3>Risco</h3>
              <p id="risco-texto" th:text="*{classificacao.getDescricao()}"></p>
            </div>

            <div class="ia-precaucoes-mesage">
              <h3>Precauções</h3>
              <p id="mensagem-texto" th:text="*{mensagem}"></p>
            </div>

          </section>

        </div>

        <div class="div-history">
          <ul>
            <li class="container-weather-line" th:each="historico : ${historicoTemperatura}">
              <span th:text="${#temporals.format(historico.temperatura.dataHora, 'dd/MM/yyyy HH:mm')}"></span> -
              <span th:text="${#numbers.formatDecimal(historico.temperatura.temperaturaMaxima, 1, 0)} + '°C'"></span>
              <img class="open-weather-icon"
                   th:if="${historico.temperatura.icon} != null"
                   th:src="'https://openweathermap.org/img/wn/' + ${historico.temperatura.icon} + '@2x.png'"
                   alt="ícone do tempo" />
              <span th:text="${historico.classificacao.getDescricao()}"></span>
            </li>
          </ul>

        </div>

      </aside>
    </div>
  </main>
</body>
</html>